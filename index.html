<!doctype html>



  


<html class="theme-next muse use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="What?!">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="What?!">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="What?!">
<meta name="twitter:description">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: 'Author'
    }
  };
</script>




  <link rel="canonical" href="http://yoursite.com/"/>

  <title> What?! </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">What?!</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/31/domain-driven-design/" itemprop="url">
                  Domain Driven Design
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-07-31T23:41:16-07:00" content="2016-07-31">
              2016-07-31
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Design/" itemprop="url" rel="index">
                    <span itemprop="name">Design</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Definition-of-Domain-Driven-Design"><a href="#Definition-of-Domain-Driven-Design" class="headerlink" title="Definition of Domain Driven Design"></a>Definition of Domain Driven Design</h2><p><strong>What is “domain”?</strong><br>A software is designed for an application purpose. This application area is called a “domain”. For example, public transit system is used for transportation domain; hospital system is for medical domain etc.</p>
<p><strong>What is “domain driven design”?</strong><br>If you want to design a good software for use in a certain domain, you should let that “domain” drive your design. This book typically talks about how you could design and maintain good softwares based on communications with domain experts.</p>
<h2 id="Use-Ubiquitous-Language"><a href="#Use-Ubiquitous-Language" class="headerlink" title="Use Ubiquitous Language"></a>Use Ubiquitous Language</h2><p><strong>What is “ubiquitous language” here?</strong><br>Mainly refers to diagram languages like UML.</p>
<p><strong>When to use?</strong><br>When you want to communicate with domain experts, because they don’t understand codes -.- Anyway, you should talk deeply with domain experts and use UML to communicate about domain concepts. Keep documenting these ideas and concepts is also a good habit.</p>
<h2 id="Layered-Architecture"><a href="#Layered-Architecture" class="headerlink" title="Layered Architecture"></a>Layered Architecture</h2><img src="/2016/07/31/domain-driven-design/layered_architecture.png" alt="Layered Architecture in DDD" title="Layered Architecture in DDD">
<table>
<thead>
<tr>
<th>Layer</th>
<th>Responsibility</th>
</tr>
</thead>
<tbody>
<tr>
<td>User Interface Layer</td>
<td>Responsible for showing information to the user / external system and interpreting the user’s commands / external system’s input.</td>
</tr>
<tr>
<td>Application Layer</td>
<td>A thin layer which is only responsible for coordinates tasks between user interface and domain layer. It should not coantain any business rules.</td>
</tr>
<tr>
<td>Domain Layer(Model Layer)</td>
<td>As <em>the heart of business software</em>, this layer is responsible for representing and interpreting concepts of the business logic.</td>
</tr>
<tr>
<td>Infrastructure Layer</td>
<td>Provide low-level technical support for higher layers, e.g. message sending(HTTP) for the application, persistence(Database) for the domain, drawing widgets for the UI etc.</td>
</tr>
</tbody>
</table>
<h2 id="Others"><a href="#Others" class="headerlink" title="Others"></a>Others</h2><p><strong>Refactor toward deeper insights</strong></p>
<p><strong>Maintain model integrity</strong><br>e.g Use shared kernel </p>
<p>etc…</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/04/sed/" itemprop="url">
                  Sed
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-07-04T22:47:30-07:00" content="2016-07-04">
              2016-07-04
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Log/" itemprop="url" rel="index">
                    <span itemprop="name">Log</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h3><h4 id="最基本"><a href="#最基本" class="headerlink" title="最基本"></a>最基本</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -e &apos;d&apos; /etc/services</span><br></pre></td></tr></table></figure>
<p>上面的命令没有任何输出。</p>
<p>如何理解？ sed打开文件/etc/services，读入<strong>一行</strong>到缓冲区，执行命令’d’(delete)，删除这行，然后打印缓冲区到标准输出 (stdout) (此时缓冲区已被删除，为空！所以没有任何输出) -e：执行其后面的命令。</p>
<p>注意：</p>
<ol>
<li>sed并没有修改源文件；</li>
<li>sed命令是面向行的，’d’命令不是一下删除整个文件，而是逐行读出，逐行删除，再输出；</li>
<li>用单引号括起sed的命令。</li>
</ol>
<h4 id="定址"><a href="#定址" class="headerlink" title="定址"></a>定址</h4><p>之前的例子中sed命令’d’作用于文件中所有行，如何指定其作用于某些行？</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -e &apos;1d&apos; /etc/services</span><br></pre></td></tr></table></figure>
<p><strong>行匹配：</strong> 这里’d’命令前加上1代表只作用于第一行。因此 sed 打开文件，读出第一行到模式缓冲区，删除后输出到 stdout；然后再读出其它行，不做任何操作输出。所以最后会显示除了第一行之外的所有行。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -e &apos;1,10d&apos; /etc/services</span><br></pre></td></tr></table></figure>
<p><strong>行地址匹配：</strong> 当用逗号将两个地址分开时，sed 将把后面的命令应用到从第一个地址开始、到第二个地址结束的范围。所以最后输出除1-10行外的所有行。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -e &apos;/^#/d&apos; /etc/services</span><br></pre></td></tr></table></figure>
<p><strong>规则表达式地址：</strong> 规则表达式地址总是由斜杠括起。它们指定一种 模式，紧跟在规则表达式地址之后的命令将仅适用于正好与该特定模式匹配的行。这里 ^# 代表以 # 开头的行，所以这个命令会删除所有带注释的行并输出其他行。又比如<code>sed -e &#39;/^$/d&#39; /etc/services</code>会删除所有空白行再输出。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -n -e &apos;/regexp/p&apos; /path/to/my/test/file</span><br></pre></td></tr></table></figure>
<p><strong>输出匹配行：</strong> 3中把 regex 匹配到的行删除，并打印其它内容；这里则是把 regex 匹配到的内容打印，不打印其它行。详解：-n 该选项告诉 sed 除非明确要求打印模式缓冲区，否则不这样做；-p 选项代表明确要求打印模式缓冲区。所以：sed读出一行到模式缓冲区，如果匹配的话就打印(p)，不匹配的话在-n的作用下就不输出，所以最后只输出和 regex 匹配的行。比如<code>sed -n -e &#39;/^#/p&#39; /etc/services</code>就会只打印注释行。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -n -e &apos;/BEGIN/,/END/p&apos; /my/test/file</span><br></pre></td></tr></table></figure>
<p>我们可以指定两个用逗号分开的规则表达式，sed 将与所有从匹配第一个规则表达式的第一行开始，到匹配第二个规则表达式的行结束（包括该行）的所有行匹配。所以这个命令将打印所有以包含 “BEGIN” 开始，并以 包含”END” 结束的文本块（包含这两行）。注意如果要匹配只包含BEGIN的行，应该用：<code>/^BEGIN$/</code></p>
<h3 id="替换"><a href="#替换" class="headerlink" title="替换"></a>替换</h3><h4 id="最基本-1"><a href="#最基本-1" class="headerlink" title="最基本"></a>最基本</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -e &apos;s/foo/bar/&apos; file</span><br></pre></td></tr></table></figure>
<p>将file中每行 <strong>第一次</strong> 出现的foo替换成bar。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -e &apos;s/foo/bar/g&apos; file</span><br></pre></td></tr></table></figure>
<p>末尾加上g选项代表全局替换，而不是每行第一个。</p>
<h4 id="定址-1"><a href="#定址-1" class="headerlink" title="定址"></a>定址</h4><p>替换命令最重要的是要明白 ‘s///‘ 是替换命令，是一个类似于上文中 ‘d’的命令。所以 ‘s///‘ 前面也可以加上地址定位来控制将替换命令作用于哪些行。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -e &apos;1,10s/foo/bar/g&apos; file</span><br></pre></td></tr></table></figure>
<p>将file中1-10行的foo全部替换成bar。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -e &apos;/^$/,/^END/s/foo/bar/g&apos; file</span><br></pre></td></tr></table></figure>
<p>将file中从空白行开始到以END开始的行中所有的foo替换成bar。</p>
<h4 id="使用-amp"><a href="#使用-amp" class="headerlink" title="使用&amp;"></a>使用&amp;</h4><p>用&amp;代表规则表达式匹配到的内容。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -e &apos;s/.*/add: &amp;/g&apos; file</span><br></pre></td></tr></table></figure>
<p>.* 可以匹配所有字符，所以这里将把file中每一行前面加上add: 之后输出。 类似于用了vim的visual block。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -e &apos;s/BEGIN/B&amp;/g&apos; file</span><br></pre></td></tr></table></figure>
<p>这个命令则会把file中所有BEGIN字符前面加上B字符输出，类似于vim中的全局替换。（其实替换功能都类似=.=）</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/06/24/java-enum/" itemprop="url">
                  Java Enum
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-06-24T20:33:39-07:00" content="2016-06-24">
              2016-06-24
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Design/" itemprop="url" rel="index">
                    <span itemprop="name">Design</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="Simplest-Enum"><a href="#Simplest-Enum" class="headerlink" title="Simplest Enum"></a>Simplest Enum</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public enum Planet &#123; MERCURY, VENUS, EARTH, MARS, JUPITER, SATURN, URANUS, NEPTUNE&#125;</span><br></pre></td></tr></table></figure>
<p>Java Enums are classes that export one instance for each enumeration constant via a public static final field.</p>
<h4 id="Rich-Enum-Type"><a href="#Rich-Enum-Type" class="headerlink" title="Rich Enum Type"></a>Rich Enum Type</h4><p>Here is the extended version of the simplest enum, with fields and methods.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public enum Planet &#123;       MERCURY(3.302e+23, 2.439e6),       VENUS  (4.869e+24, 6.052e6),       EARTH  (5.975e+24, 6.378e6),       MARS   (6.419e+23, 3.393e6),       JUPITER(1.899e+27, 7.149e7),       SATURN (5.685e+26, 6.027e7),       URANUS (8.683e+25, 2.556e7),       NEPTUNE(1.024e+26, 2.477e7);       private final double mass;           // In kilograms       private final double radius;         // In meters       private final double surfaceGravity; // In m / s^2       // Universal gravitational constant in m^3 / kg s^2       private static final double G = 6.67300E-11;       // Constructor       Planet(double mass, double radius) &#123;           this.mass = mass;           this.radius = radius;           surfaceGravity = G * mass / (radius * radius);	   &#125;       public double mass()           &#123; return mass; &#125;       public double radius()         &#123; return radius; &#125;       public double surfaceGravity() &#123; return surfaceGravity; &#125;       public double surfaceWeight(double mass) &#123;           return mass * surfaceGravity;  // F = ma	   &#125; &#125;</span><br></pre></td></tr></table></figure>
<p>How to use this Enum:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Planet.EARTH.surfaceGravity() //get the surface gravity on earth</span><br><span class="line">Planet.MARS.surfaceWeight(600.00) //get the weight on mars for a thing mass = 600kg</span><br></pre></td></tr></table></figure>
<p>定义Planet枚举类，MERCURY等是instance，后面再申明的fields都是Planet类的成员。所以Planet其实有mass、radius、surfaceGravity三个fields，有一个Constructor。<br>在初始化MERCURY等instances时就是调用了这个constructor，所以每个instance都接收到mass和radius两个初始变量，并计算出surfaceGravity（优化而已）。<br>当然每个instance也可以调用申明的mass()、radius()、surfaceGravity()函数（Planet.EARTH.surfaceGravity()就相当于一个instance调用自己的函数, Planet.MARS.surfaceweight()同理）</p>
<h4 id="Richest-Enum-Type"><a href="#Richest-Enum-Type" class="headerlink" title="Richest Enum Type"></a>Richest Enum Type</h4><p>The use case is you want to associate different behavior with each enum constant. </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public enum Operation &#123;       PLUS   &#123; double apply(double x, double y)&#123;return x + y;&#125; &#125;,       MINUS  &#123; double apply(double x, double y)&#123;return x - y;&#125; &#125;,       TIMES  &#123; double apply(double x, double y)&#123;return x * y;&#125; &#125;,       DIVIDE &#123; double apply(double x, double y)&#123;return x / y;&#125; &#125;;       abstract double apply(double x, double y);   &#125;</span><br></pre></td></tr></table></figure>
<p>Declare an abstract methodin the enum class and override it with a concrete method for each enum constant. So if you add another operation in the enum, you want forget to override the abstract method (Even if you forget, compiler will remind you.)</p>
<p>每个Operation类都有抽象函数apply，作为Operation类的instance(public static final field)，PLUS等都要override这个抽象函数。</p>
<h4 id="Other"><a href="#Other" class="headerlink" title="Other"></a>Other</h4><ul>
<li><p><strong>values() and toString()</strong><br>  Every enum has a static method values() which returns an array of its enum constants in the order they were declared. <code>Planet.values()</code> returns <code>Planet[]</code> which contains Planet.MERCURY, Planet.VENUS etc. So you can do something like:</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">for (Planet p : Planet.values) &#123;</span><br><span class="line">	System.out.println(p);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>  The code uses toString() method and prints out the name of each planet.</p>
<p>  toString() method returns the declared name of each enum constant, which makes it easy to use println() functions. But you can always override toString() to make it print out anything you want.</p>
</li>
<li><p><strong>valueOf()</strong><br>Every enum has an auto generated valueOf() method that takes in an enum constant’s name and returns the constant itself.</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Planet.valueOf(&quot;EARTH&quot;)  //return Planet.EARTH</span><br></pre></td></tr></table></figure>
</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/06/19/java-exceptions/" itemprop="url">
                  Java Exceptions
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-06-19T20:31:15-07:00" content="2016-06-19">
              2016-06-19
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Design/" itemprop="url" rel="index">
                    <span itemprop="name">Design</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="Exceptions-in-Java"><a href="#Exceptions-in-Java" class="headerlink" title="Exceptions in Java"></a>Exceptions in Java</h3><p>In Java, exceptions can be <strong>checked</strong> or <strong>unchecked</strong>.</p>
<p>Red colored are checked exceptions. Any checked exceptions that may be thrown in a method must either be caught or declared in the method’s throws clause. Checked exceptions must be caught at compile time. Checked exceptions are so called because both the Java compiler and the Java virtual machine check to make sure this rule is obeyed. Green colored are uncheck exceptions. They are exceptions that are not expected to be recovered, such as null pointer, divide by 0, etc.</p>
<img src="/2016/06/19/java-exceptions/Exception-Hierarchy-Diagram.jpeg" alt="Java Exceptions Hierarchy" title="Java Exceptions Hierarchy">
<p>Principles:</p>
<ul>
<li>Use checked exceptions for conditions from which the caller can reasonably be expected to recover. Use unchecked (usually RuntimeError) if the error is unrecoverable.</li>
<li>Experienced programmers strive for a high degree of code reuse. Use standard checked exceptions:</li>
</ul>
<table>
<thead>
<tr>
<th>Exceptions</th>
<th>Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td>IllegalArgumentException</td>
<td>Non-null parameter value is inappropriate</td>
</tr>
<tr>
<td>IllegalStateException</td>
<td>Object state is inappropriate for method invocation</td>
</tr>
<tr>
<td>NullPointerException</td>
<td>Parameter value is null where prohibited</td>
</tr>
<tr>
<td>IndexOutOfBoundsException</td>
<td>Index parameter value is out of range</td>
</tr>
</tbody>
</table>
<ul>
<li>Use the @throws tag to document each unchecked exception that a method can throw in the comment.</li>
<li><p>Where should / How to catch exceptions?</p>
<p><strong>Exception translation</strong>: It will be disconcerting if a higher-level method throws a lower-level exception because the exception is not appropiate to the higher-level method. So higher layers should catch lower-level exceptions and, in their place, throw exceptions that can be explained in terms of the higher-level abstraction. </p>
<p><strong>Exception chaining</strong>: Lower-level exceptions could be passed into higher-level exceptions if they are useful for debugging.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"> try &#123;      // Use lower-level abstraction   &#125; catch(LowerLevelException cause) &#123;      throw new HigherLevelException(..., cause);&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Include detailed failure message</strong> When capture the failure, the detail message of an exception should contain the values of all parameters and fields that “contributed to the exception.” For example, the detail message of an IndexOutOfBoundsException should contain the lower bound, the upper bound, and the index value that failed to lie between the bounds. This will help debugging a lot!!! </p>
<p>job里调用createTable()，createTable()又调用SQLHelper去创建table。SqlHelper抛出SqlException，createTable()需要catch了再抛出，在job中又需要catch了再retry，最后抛出RTE。</p>
</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/06/18/oo-design/" itemprop="url">
                  Objective Oriented Design
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-06-18T23:51:30-07:00" content="2016-06-18">
              2016-06-18
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Design/" itemprop="url" rel="index">
                    <span itemprop="name">Design</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="SRP"><a href="#SRP" class="headerlink" title="SRP"></a>SRP</h3><p><strong>Single Responsibility Principle</strong><br>Every class should have only one responsibility.</p>
<hr>
<h3 id="DRY"><a href="#DRY" class="headerlink" title="DRY"></a>DRY</h3><p><strong>Don’t Repeat Yourself</strong></p>
<p>Abstract out the common code.</p>
<hr>
<h3 id="OCP"><a href="#OCP" class="headerlink" title="OCP"></a>OCP</h3><p><strong>Open-closed Principle</strong></p>
<p><strong>“Software entities (classes, modules, functions, etc.) should be open for extension, but closed for modification.”</strong></p>
<p>Example: we want to have a function to draw circle and rectangular. Naive approach:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">class Circle &#123;</span><br><span class="line">	void draw() &#123;...&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Rectangular &#123;</span><br><span class="line">	void draw() &#123;...&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void drawShape (Class t) &#123;</span><br><span class="line">	if (t == Circle.class) &#123;</span><br><span class="line">		//call Circle.draw();</span><br><span class="line">	&#125;else if (t == Rectangular.class) &#123;</span><br><span class="line">		//call Rectangular.draw();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>In this case, every time we want to add a new shappe, we need to modify draw() function.</p>
<p>OCP approach:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">abstract class Shape &#123;</span><br><span class="line">  abstract void draw();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Circle extends Shape &#123;</span><br><span class="line">	void draw() &#123;</span><br><span class="line">		//override abstract draw();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Rectangular extens Shape &#123;</span><br><span class="line">	void draw() &#123;</span><br><span class="line">		//override abstract draw();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void drawShape(Shape shape) &#123;</span><br><span class="line">	shape.draw();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>P函数对A、B类进行类似的操作，应该要考虑到需要添加C类时，不应该要修改P，而只要添加C即可。（confucius对module的处理：如果需要添加一个module，只要在confucius中添加module即可，不需要改动panopticon和confucius其它地方）。 </p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  


          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="zyymorning" />
          <p class="site-author-name" itemprop="name">zyymorning</p>
          <p class="site-description motion-element" itemprop="description"></p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">5</span>
              <span class="site-state-item-name">posts</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">2</span>
                <span class="site-state-item-name">categories</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">9</span>
                <span class="site-state-item-name">tags</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">zyymorning</span>
</div>

<div class="powered-by">
  Powered by <a class="theme-link" href="http://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  



  




  
  
  

  

  

</body>
</html>
